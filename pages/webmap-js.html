---
title:  Webmap JS
permalink: /webmap-js.html
---

<!DOCTYPE html>
<html>

<head>
    <title>Germantown YWCA and Related Buildings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- To avoid unwanted scaling -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html,
        body,
        #map {
            height: 100%;
            width: 100%;
        }

        .descrip {
            width: 250px;
            font-size: 16px;
            font-family: "Open Sans", Helvetica, sans-serif;
            padding: 10px 14px;
            background-color: #FFFFFF;
            border-radius: 5px;
            border: 5px solid #D3D3D3;
            display: none;
            position: absolute;
            bottom: 10px;
            left: 10px;
            z-index: 1000;
            /* Ensure it's above the map */
        }

        .descrip.visible {
            display: block;
        }

        .trigger-zone {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 100px;
            z-index: 1000;
        }

        .ywca {
            filter: hue-rotate(144deg) saturate(1.5); //red
        }
        .main-building {
            filter: hue-rotate(300deg); //green
        }
        .branch {
            filter: hue-rotate(60deg); //purple
        }
        .lodgings {
            filter: hue-rotate(240deg); //green
        }
        .industry {
            filter: hue-rotate(120deg); //pink
        }
        .landmark {
            filter: hue-rotate(180deg); //brown
        }
        .other {
            filter: hue-rotate(0deg); //blue
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <div class="trigger-zone"></div>
    <!-- Include Leaflet library -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        // Define tile layers
        var googleStreets = L.tileLayer('https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
            maxZoom: 20,
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
        });

        var googleSat = L.tileLayer('https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            maxZoom: 20,
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
        });

        // Initialize the map
        var map = L.map("map", {
            center: [40.03270207250667, -75.17665301048476],
            zoom: 15,
            layers: [esriStreetMapLayer] // default layer
        });

        // Add the GeoJSON data to the layers
        fetch('assets/data/building-info.json')
        .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
        })
        .then(data => {
        addDataToLayers(data);
        })
        .catch(error => {
        console.error('Error loading GeoJSON data:', error);
        });

        // Define GeoJSON layers for different categories
        var otherLayer = L.geoJSON(null, {
            pointToLayer: function (feature, latlng) {
                var marker = L.marker(latlng);
                marker.on('add', function () {
                    marker._icon.classList.add("other");
                });
                return marker;
            },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.title && feature.properties.description) {
                    var popupContent = '<h3>' + feature.properties.title + '</h3>' +
                        '<p>' + feature.properties.description + '</p>';
                    layer.bindPopup(popupContent);
                }
            }
        });

        var branchLayer = L.geoJSON(null, {
            pointToLayer: function (feature, latlng) {
                var marker = L.marker(latlng);
                marker.on('add', function () {
                    marker._icon.classList.add("branch");
                });
                return marker;
            },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.title && feature.properties.description) {
                    var popupContent = '<h3>' + feature.properties.title + '</h3>' +
                        '<p>' + feature.properties.description + '</p>';
                    layer.bindPopup(popupContent);
                }
            }
        });

        var industryLayer = L.geoJSON(null, {
            pointToLayer: function (feature, latlng) {
                var marker = L.marker(latlng);
                marker.on('add', function () {
                    marker._icon.classList.add("industry");
                });
                return marker;
            },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.title && feature.properties.description) {
                    var popupContent = '<h3>' + feature.properties.title + '</h3>' +
                        '<p>' + feature.properties.description + '</p>';
                    layer.bindPopup(popupContent);
                }
            }
        });

        var landmarkLayer = L.geoJSON(null, {
            pointToLayer: function (feature, latlng) {
                var marker = L.marker(latlng);
                marker.on('add', function () {
                    marker._icon.classList.add("landmark");
                });
                return marker;
            },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.title && feature.properties.description) {
                    var popupContent = '<h3>' + feature.properties.title + '</h3>' +
                        '<p>' + feature.properties.description + '</p>';
                    layer.bindPopup(popupContent);
                }
            }
        });

        var lodgingsLayer = L.geoJSON(null, {
            pointToLayer: function (feature, latlng) {
                var marker = L.marker(latlng);
                marker.on('add', function () {
                    marker._icon.classList.add("lodgings");
                });
                return marker;
            },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.title && feature.properties.description) {
                    var popupContent = '<h3>' + feature.properties.title + '</h3>' +
                        '<p>' + feature.properties.description + '</p>';
                    layer.bindPopup(popupContent);
                }
            }
        });

        var mainBuildingLayer = L.geoJSON(null, {
            pointToLayer: function (feature, latlng) {
                var marker = L.marker(latlng);
                marker.on('add', function () {
                    marker._icon.classList.add("main-building");
                });
                return marker;
            },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.title && feature.properties.description) {
                    var popupContent = '<h3>' + feature.properties.title + '</h3>' +
                        '<p>' + feature.properties.description + '</p>';
                    layer.bindPopup(popupContent);
                }
            }
        });

        var ywcaLayer = L.geoJSON(null, {
            pointToLayer: function (feature, latlng) {
                var marker = L.marker(latlng);
                marker.on('add', function () {
                    marker._icon.classList.add("ywca");
                });
                return marker;
            },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.title && feature.properties.description) {
                    var popupContent = '<h3>' + feature.properties.title + '</h3>' +
                        '<p>' + feature.properties.description + '</p>';
                    layer.bindPopup(popupContent);
                }
            }
        });

        // Function to add GeoJSON data to respective layers
        function addDataToLayers(data) {
            data.features.forEach(function (feature) {
                if (feature.properties && feature.properties.category) {
                    var category = feature.properties.category.toLowerCase();
                    if (category === 'other') {
                        otherLayer.addData(feature);
                    } else if (category === 'branch') {
                        branchLayer.addData(feature);
                    } else if (category === 'industry') {
                        industryLayer.addData(feature);
                    } else if (category === 'landmark') {
                        landmarkLayer.addData(feature);
                    } else if (category === 'lodgings') {
                        lodgingsLayer.addData(feature);
                    } else if (category === 'main-building') {
                        mainBuildingLayer.addData(feature);
                    } else if (category === 'ywca') {
                        ywcaLayer.addData(feature);
                    }
                }
            });
        }
        
        otherLayer.addTo(map);
        branchLayer.addTo(map);
        industryLayer.addTo(map);
        landmarkLayer.addTo(map);
        lodgingsLayer.addTo(map);
        mainBuildingLayer.addTo(map);
        ywcaLayer.addTo(map);

        // Add boundary line
        var germantownBoundary = L.polyline([
            [40.0459162067792, -75.18222981253187],
            [40.04547445973449, -75.18203539554251],
            [40.04478053640238, -75.18168976740164],
            [40.043430819159575, -75.18103053250151],
            [40.03497442446138, -75.17372136089996],
            [40.02897699564336, -75.16330482224477],
            [40.02388794530976, -75.15978642735094],
            [40.022348325903785, -75.1616852435925],
            [40.01961113884869, -75.16336066968802],
            [40.01751540587145, -75.17201703778757],
            [40.035219178995106, -75.1929296105513],
            [40.0459162067792, -75.18222981253187]
        ]).addTo(map);

        // Description box control
        var descrip = L.control({ position: 'bottomleft' });

        descrip.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'descrip');
            div.innerHTML =
                '<h1>About this Map</h1><hr>' +
                '<p>This map displays the location of the Germantown YWCA building and other buildings associated with its history.</p>' +
                '<h2>How to Use</h2>' +
                '<p>Click on a marker to learn more about a landmark.</p>';
            return div;
        };

        descrip.addTo(map);

        // Show description box on map load
        descrip.getContainer().classList.add('visible');

        // Function to hide the description box
        function hideDescriptionBox() {
            descrip.getContainer().classList.remove('visible');
        }

        // Function to show the description box
        function showDescriptionBox() {
            descrip.getContainer().classList.add('visible');
        }

        // Set a timeout to hide the description box after 10 seconds
        setTimeout(hideDescriptionBox, 10000);

        // Add a trigger zone for showing the description box on mouseenter
        var triggerZone = document.querySelector('.trigger-zone');
        triggerZone.addEventListener('mouseenter', showDescriptionBox);

        // Add a mouseleave event to hide the description box once the mouse leaves it
        descrip.getContainer().addEventListener('mouseleave', hideDescriptionBox);
        
        var esriStreetMapLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri',
            maxZoom: 18
        }).addTo(map);
        
        var openStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);
        
        // Layer controls
        var baseLayers = {
            "Esri Street Map": esriStreetMapLayer,
            "Open Street Map": openStreetMap,
            "Google Streets": googleStreets,
            "Google Satellite": googleSat
        };

        var overlayLayers = {
            "YWCA": ywcaLayer,
            "YWCA Branches": branchLayer,
            "YWCA Provided Lodgings": lodgingsLayer,
            "Main Buildings": mainBuildingLayer,
            "Industries": industryLayer,
            "Landmarks": landmarkLayer,
            "Others": otherLayer
        };

        var boundries = {
            "Germantown Boundary": germantownBoundary
        };
            
        L.control.layers(baseLayers, overlayLayers, boundries).addTo(map);

    </script>
</body>

</html>
